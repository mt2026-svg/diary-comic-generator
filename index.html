<!DOCTYPE html>
<html lang="ja">
<body>
    <h2>4コマ日記テスト</h2>
    <textarea id="input" style="width:100%;height:100px;"></textarea>
    <button onclick="go()">生成</button>
    <div id="out"></div>
    <script>
        async function go() {
            document.getElementById('out').innerText = "通信中...";
            try {
                const r = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contents: [{ parts: [{ text: document.getElementById('input').value + "を4コマ漫画のJSON形式(emoji, caption)で教えて" }] }] })
                });
                const d = await r.json();
                document.getElementById('out').innerText = d.text;
            } catch(e) {
                alert("エラー: " + e.message);
            }
        }
    </script>
</body>
</html>
